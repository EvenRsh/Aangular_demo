var controllers=angular.module("controllers",[]);controllers.controller("indexCtrl",["$scope","$http","cookie","$window",function(e,t,o,n){t.get("http://localhost:81/news/php/index.php/news_api/get_channel").success(function(t){console.log(t),e.channels=t}),t.post("http://localhost:81/news/php/index.php/login_api/auto_login",{params:{username:o.getCookie("username"),token:o.getCookie("token")}}).success(function(e){console.log(e),e||(n.location.href="#/login")}),e.tabs=1,e.changeTab=function(t){e.tabs=t}}]).controller("recommendCtrl",["$scope","$http","$state",function(e,t,o){e.isSearch=!1,e.search=function(){e.isSearch=!0},e.cancel=function(){e.searchName="",e.isSearch=!1},e.isShowActionSheet=!1,e.showActionSheet=function(){e.isShowActionSheet=!0},e.hideActionSheet=function(){e.isShowActionSheet=!1},e.searchName="",e.isLoadMore=!1,e.page=1,e.news=[],e.sort=!0,e.loadMore=function(){e.isLoadMore=!1,t.get("js/show_list.json",{params:{page:e.page++,channel_id:o.params.id}}).success(function(t){console.log(t),e.news=e.news.concat(t.news_list),e.isLoadMore=!0})},e.loadMore()}]).controller("detailCtrl",["$scope","$http","$state","$sce",function(e,t,o,n){console.log(o.params.id),t.get("js/show_detail.json",{params:{id:o.params.id}}).success(function(t){console.log(t),e.new=t.news_list[0]}),e.isGallery=!1,e.imgUrl="",e.gallery=function(t){e.isGallery=!0,e.imgUrl=t}}]).controller("insertCtrl",["$scope","$http",function(e,t){e.submit=function(){console.log(e.title),console.log(e.text),t.get("http://localhost:81/news/php/index.php/news_api/insert_news",{params:{title:e.title,text:e.text}}).success(function(e){console.log(e)})}}]).controller("loginCtrl",["$scope","$http","cookie","$window",function(e,t,o,n){e.submit=function(){console.log(e.username),console.log(e.password),t.post("http://localhost:81/news/php/index.php/login_api/login",{params:{username:e.username,password:e.password}}).success(function(e){o.setCookie("username",e.user_name),o.setCookie("token",e.info.token),n.location.href="#/index/recommend/6"})}}]);var app=angular.module("newsApp",["ng.post","routers","directives","controllers","services"]),directives=angular.module("directives",[]);directives.directive("wheader",function(){return{templateUrl:"directive/wheader.html"}}).directive("wsearch",function(){return{templateUrl:"directive/wsearch.html"}}).directive("wpanel",function(){return{templateUrl:"directive/wpanel.html"}}).directive("wactionsheet",function(){return{templateUrl:"directive/wactionsheet.html"}}).directive("wcarousel",function(){return{templateUrl:"directive/wcarousel.html",link:function(e,t,o){new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationClickable:!0})}}});var routers=angular.module("routers",["ui.router"]);routers.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("index",{url:"/index",controller:"indexCtrl",templateUrl:"template/index.html"}).state("index.recommend",{url:"/recommend/:id",controller:"recommendCtrl",templateUrl:"template/recommend.html"}).state("index.hot",{url:"/hot/:id",templateUrl:"template/hot.html"}).state("index.entertainment",{url:"/entertainment/:id",templateUrl:"template/entertainment.html"}).state("search",{url:"/search",controller:"homeCtrl",templateUrl:"template/search.html"}).state("detail",{url:"/detail/:id",controller:"detailCtrl",templateUrl:"template/detail.html"}).state("insert",{url:"/insert",controller:"insertCtrl",templateUrl:"template/insert.html"}).state("login",{url:"/login",controller:"loginCtrl",templateUrl:"template/login.html"}),t.when("","/index/recommend/6")}]);var services=angular.module("services",[]);services.service("cookie",["$document",function(e){return{setCookie:function(t,o){var n=10,r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),e[0].cookie=t+"="+o+";expires="+r},getCookie:function(t){var o,n=new RegExp("(^|)"+t+"=([^;]*)(;|$)");if(o=e[0].cookie.match(n))return o[2]}}}]);